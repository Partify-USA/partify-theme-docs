"use strict";(globalThis.webpackChunkpartify_usa=globalThis.webpackChunkpartify_usa||[]).push([[5136],{8453(e,t,n){n.d(t,{R:()=>l,x:()=>c});var i=n(6540);const s={},r=i.createContext(s);function l(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:t},e.children)}},8974(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"product-page/auto-select-quality","title":"Auto-Select Quality Feature","description":"Overview","source":"@site/docs/product-page/auto-select-quality.md","sourceDirName":"product-page","slug":"/product-page/auto-select-quality","permalink":"/partify-theme-docs/docs/product-page/auto-select-quality","draft":false,"unlisted":false,"editUrl":"https://github.com/partify/partify-theme-docs/tree/main/docs/product-page/auto-select-quality.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Product Video Carousel","permalink":"/partify-theme-docs/docs/product-page/video-carousel"},"next":{"title":"Add to Cart Re-enable on Quality Change","permalink":"/partify-theme-docs/docs/product-page/add-to-cart-quality-reenable"}}');var s=n(4848),r=n(8453);const l={sidebar_position:3},c="Auto-Select Quality Feature",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Business Logic",id:"business-logic",level:2},{value:"Primary Selection Logic (Priority Order)",id:"primary-selection-logic-priority-order",level:3},{value:"1. Product URL Detection (Highest Priority)",id:"1-product-url-detection-highest-priority",level:4},{value:"2. Single In-Stock Detection (Fallback)",id:"2-single-in-stock-detection-fallback",level:4},{value:"User Selection Protection",id:"user-selection-protection",level:3},{value:"Technical Architecture",id:"technical-architecture",level:2},{value:"Files Modified",id:"files-modified",level:3},{value:"1. <code>assets/product-page-component-library.js</code>",id:"1-assetsproduct-page-component-libraryjs",level:4},{value:"2. <code>snippets/quality-options-radio-btns.liquid</code>",id:"2-snippetsquality-options-radio-btnsliquid",level:4},{value:"Execution Flow",id:"execution-flow",level:2},{value:"On Page Load",id:"on-page-load",level:3},{value:"Product Detection Algorithm",id:"product-detection-algorithm",level:3},{value:"Inventory Detection Algorithm",id:"inventory-detection-algorithm",level:3},{value:"Data Dependencies",id:"data-dependencies",level:2},{value:"<code>window.productVariants</code> Structure",id:"windowproductvariants-structure",level:3},{value:"Quality Radio Button Structure",id:"quality-radio-button-structure",level:3},{value:"Debug Console Logs",id:"debug-console-logs",level:2},{value:"Success Example",id:"success-example",level:3},{value:"Inventory-Based Example",id:"inventory-based-example",level:3},{value:"No Auto-Selection Example",id:"no-auto-selection-example",level:3},{value:"Testing Scenarios",id:"testing-scenarios",level:2},{value:"Test Case 1: Product URL Detection",id:"test-case-1-product-url-detection",level:3},{value:"Test Case 2: Inventory-Based Selection",id:"test-case-2-inventory-based-selection",level:3},{value:"Test Case 3: User Override Protection",id:"test-case-3-user-override-protection",level:3},{value:"Performance Metrics",id:"performance-metrics",level:2},{value:"Browser Compatibility",id:"browser-compatibility",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: No Auto-Selection Occurs",id:"issue-no-auto-selection-occurs",level:3},{value:"Issue: Wrong Quality Selected",id:"issue-wrong-quality-selected",level:3},{value:"Issue: Auto-Select Overrides User Choice",id:"issue-auto-select-overrides-user-choice",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Potential Improvements",id:"potential-improvements",level:3},{value:"1. Analytics Integration",id:"1-analytics-integration",level:4},{value:"2. User Preference Persistence",id:"2-user-preference-persistence",level:4},{value:"3. Multi-Language Support",id:"3-multi-language-support",level:4},{value:"4. A/B Testing Framework",id:"4-ab-testing-framework",level:4},{value:"Integration Points",id:"integration-points",level:2},{value:"Existing Features Affected",id:"existing-features-affected",level:3},{value:"Rollback Plan",id:"rollback-plan",level:2},{value:"Quick Disable (No Deploy)",id:"quick-disable-no-deploy",level:3},{value:"Code Rollback",id:"code-rollback",level:3},{value:"Code Review Checklist",id:"code-review-checklist",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Support",id:"support",level:2}];function d(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"auto-select-quality-feature",children:"Auto-Select Quality Feature"})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"The Auto-Select Quality feature automatically selects the appropriate quality option (Aftermarket, CAPA, or OEM) on product detail pages based on either the product being viewed or inventory availability. This streamlines the user experience by reducing the number of selections required when the choice is obvious."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Feature Branch:"})," ",(0,s.jsx)(t.code,{children:"feature/us-auto-select-single-instock-quality"})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"business-logic",children:"Business Logic"}),"\n",(0,s.jsx)(t.h3,{id:"primary-selection-logic-priority-order",children:"Primary Selection Logic (Priority Order)"}),"\n",(0,s.jsx)(t.h4,{id:"1-product-url-detection-highest-priority",children:"1. Product URL Detection (Highest Priority)"}),"\n",(0,s.jsx)(t.p,{children:"When a user clicks on a specific quality product from the collection listing:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Aftermarket product"})," \u2192 Auto-select Aftermarket radio"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"CAPA product"})," \u2192 Auto-select CAPA radio"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"OEM product"})," \u2192 Auto-select OEM radio"]}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"2-single-in-stock-detection-fallback",children:"2. Single In-Stock Detection (Fallback)"}),"\n",(0,s.jsx)(t.p,{children:"When exactly one quality has available inventory:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Count all qualities with ",(0,s.jsx)(t.code,{children:"hasExtraInventory = true"})," or ",(0,s.jsx)(t.code,{children:"variantInventory > 0"})]}),"\n",(0,s.jsx)(t.li,{children:"If count equals exactly 1 \u2192 Auto-select that quality"}),"\n",(0,s.jsx)(t.li,{children:"If count is 0 or 2+ \u2192 No auto-selection (user must choose)"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"user-selection-protection",children:"User Selection Protection"}),"\n",(0,s.jsx)(t.p,{children:"The system respects explicit user choices:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"\u2705 Once user clicks any quality radio, auto-selection is disabled"}),"\n",(0,s.jsxs)(t.li,{children:["\u2705 ",(0,s.jsx)(t.code,{children:"userSelectedQuality"})," flag prevents future auto-selections"]}),"\n",(0,s.jsxs)(t.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(t.strong,{children:"Exception:"})," If user's selection becomes unavailable AND exactly one other quality is available, the system may auto-switch"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"technical-architecture",children:"Technical Architecture"}),"\n",(0,s.jsx)(t.h3,{id:"files-modified",children:"Files Modified"}),"\n",(0,s.jsxs)(t.h4,{id:"1-assetsproduct-page-component-libraryjs",children:["1. ",(0,s.jsx)(t.code,{children:"assets/product-page-component-library.js"})]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Lines:"})," ~183-340"]}),"\n",(0,s.jsx)(t.p,{children:"Added core auto-selection functions:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"// Track if user has manually selected a quality\nlet userSelectedQuality = false;\n\n// Get list of qualities with inventory\nfunction getInStockQualities() {\n\t/* ... */\n}\n\n// Perform auto-selection based on URL and/or inventory\nfunction autoSelectSingleInStockQuality() {\n\t/* ... */\n}\n\n// Set up click tracking to detect user selections\nfunction initQualityAutoSelection() {\n\t/* ... */\n}\n\n// Re-evaluate after state changes\nfunction reevaluateQualityAutoSelection() {\n\t/* ... */\n}\n"})}),"\n",(0,s.jsxs)(t.h4,{id:"2-snippetsquality-options-radio-btnsliquid",children:["2. ",(0,s.jsx)(t.code,{children:"snippets/quality-options-radio-btns.liquid"})]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Lines:"})," ~439-443"]}),"\n",(0,s.jsx)(t.p,{children:"Integration point on page load:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'document.addEventListener("DOMContentLoaded", async function () {\n\t// ... existing code ...\n\n\t// Initialize quality auto-selection tracking\n\tif (typeof initQualityAutoSelection === "function") {\n\t\tinitQualityAutoSelection();\n\t}\n\n\t// Attempt auto-selection after 100ms delay\n\tsetTimeout(() => {\n\t\tif (typeof autoSelectSingleInStockQuality === "function") {\n\t\t\tautoSelectSingleInStockQuality();\n\t\t}\n\t}, 100);\n});\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"execution-flow",children:"Execution Flow"}),"\n",(0,s.jsx)(t.h3,{id:"on-page-load",children:"On Page Load"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-mermaid",children:"graph TD\n    A[Page Load] --\x3e B[DOMContentLoaded fires]\n    B --\x3e C[initQualityAutoSelection]\n    C --\x3e D[Add click listeners to quality radios]\n    D --\x3e E[Wait 100ms for productVariants to populate]\n    E --\x3e F[autoSelectSingleInStockQuality]\n    F --\x3e G{Check 1: Product URL Match?}\n    G --\x3e|Yes| H[Select matched quality]\n    G --\x3e|No| I{Check 2: Exactly 1 in stock?}\n    I --\x3e|Yes| J[Select in-stock quality]\n    I --\x3e|No| K[Do nothing]\n    H --\x3e L[Dispatch change event]\n    J --\x3e L\n    L --\x3e M[Existing handlers fire]\n    M --\x3e N[Price updates, variants load, etc.]\n"})}),"\n",(0,s.jsx)(t.h3,{id:"product-detection-algorithm",children:"Product Detection Algorithm"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// Step 1: Extract current product info\nconst currentProductHandle = window.location.pathname.split("/").pop();\nconst currentProductId = window.currentProductId;\n\n// Step 2: Check each quality (stops at first match)\nfor (let qualityType of ["aftermarket", "capa", "oem"]) {\n\tconst qualityVariants = window.productVariants[qualityType];\n\n\t// Check multiple conditions (priority order):\n\tif (currentProductId === qualityVariants[0].id) {\n\t\treturn qualityType; // \u2713 Variant ID match (most reliable)\n\t} else if (currentProductHandle === productHandle) {\n\t\treturn qualityType; // \u2713 Exact handle match\n\t} else if (productTitle.includes(` ${qualityType} `)) {\n\t\treturn qualityType; // \u2713 Quality keyword in title (with spaces)\n\t}\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"inventory-detection-algorithm",children:"Inventory Detection Algorithm"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"function getInStockQualities() {\n\tconst inStock = [];\n\n\t[\"aftermarket\", \"capa\", \"oem\"].forEach((qualityType) => {\n\t\tconst hasStock = productVariants[qualityType].some((variant) => {\n\t\t\treturn (\n\t\t\t\tvariant.hasExtraInventory === true ||\n\t\t\t\t(variant.extraInventory && parseInt(variant.extraInventory) > 0) ||\n\t\t\t\t(variant.variantInventory && parseInt(variant.variantInventory) > 0)\n\t\t\t);\n\t\t});\n\n\t\tif (hasStock) inStock.push(qualityType);\n\t});\n\n\treturn inStock; // e.g., ['capa'] or ['aftermarket', 'capa']\n}\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"data-dependencies",children:"Data Dependencies"}),"\n",(0,s.jsxs)(t.h3,{id:"windowproductvariants-structure",children:[(0,s.jsx)(t.code,{children:"window.productVariants"})," Structure"]}),"\n",(0,s.jsxs)(t.p,{children:["Populated by ",(0,s.jsx)(t.code,{children:"snippets/product-page-paint-options.liquid"})," at line ~1196:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'{\n  aftermarket: [\n    {\n      id: "40123456789",\n      title: "Unpainted +$0.00",\n      variantSku: "HY1000188",\n      variantInventory: "15",\n      extraInventory: 15,\n      baseInventory: 0,\n      hasExtraInventory: true,\n      productTitle: "2012 Hyundai Accent GLS Front Bumper - HY1000188",\n      productHandle: "2012-hyundai-accent-gls-front-bumper-hy1000188"\n    },\n    // ... more variants\n  ],\n  capa: [ /* same structure */ ],\n  oem: [ /* same structure */ ]\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"quality-radio-button-structure",children:"Quality Radio Button Structure"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'<input\n\ttype="radio"\n\tname="quality_type"\n\tvalue="aftermarket"\n\tdata-quality-sku="HY1000188"\n\tdata-price="$104.99"\n\tdata-available="true"\n/>\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Rendered by:"})," ",(0,s.jsx)(t.code,{children:"snippets/quality-options-radio-btns.liquid"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"Selector:"})," ",(0,s.jsx)(t.code,{children:'input[name="quality_type"][value="aftermarket"]'})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"debug-console-logs",children:"Debug Console Logs"}),"\n",(0,s.jsxs)(t.p,{children:["All logs are prefixed with ",(0,s.jsx)(t.code,{children:"[Auto-Select]"})," for easy filtering."]}),"\n",(0,s.jsx)(t.h3,{id:"success-example",children:"Success Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'[Auto-Select] Checking productVariants: {aftermarket: Array(12), capa: Array(11), oem: Array(11)}\n[Auto-Select] Current product handle: hy1000188c ID: 8807949641301\n[Auto-Select] aftermarket check: {productTitle: "2012 Hyundai Accent GLS Front Bumper...", variantId: "40123456789"}\n[Auto-Select] \u2713 Match found via variant ID: aftermarket\n[Auto-Select] Final selection from product detection: aftermarket\n[Auto-Select] \u2713 Auto-selecting based on product URL: aftermarket\n'})}),"\n",(0,s.jsx)(t.h3,{id:"inventory-based-example",children:"Inventory-Based Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"[Auto-Select] aftermarket: hasStock=false, variants count=12\n[Auto-Select] capa: hasStock=true, variants count=11\n[Auto-Select] oem: hasStock=false, variants count=11\n[Auto-Select] No quality detected from product URL/ID\n[Auto-Select] In-stock qualities: ['capa']\n[Auto-Select] \u2713 Auto-selecting quality based on inventory: capa\n"})}),"\n",(0,s.jsx)(t.h3,{id:"no-auto-selection-example",children:"No Auto-Selection Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"[Auto-Select] In-stock qualities: ['aftermarket', 'capa']\n[Auto-Select] Skipped: Found 2 qualities in stock (need exactly 1)\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"testing-scenarios",children:"Testing Scenarios"}),"\n",(0,s.jsx)(t.h3,{id:"test-case-1-product-url-detection",children:"Test Case 1: Product URL Detection"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Scenario"}),(0,s.jsx)(t.th,{children:"User Action"}),(0,s.jsx)(t.th,{children:"Expected Result"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"1A"}),(0,s.jsx)(t.td,{children:"Click Aftermarket from collection"}),(0,s.jsx)(t.td,{children:"Aftermarket auto-selected"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"1B"}),(0,s.jsx)(t.td,{children:"Click CAPA from collection"}),(0,s.jsx)(t.td,{children:"CAPA auto-selected"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"1C"}),(0,s.jsx)(t.td,{children:"Click OEM from collection"}),(0,s.jsx)(t.td,{children:"OEM auto-selected"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"test-case-2-inventory-based-selection",children:"Test Case 2: Inventory-Based Selection"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Scenario"}),(0,s.jsx)(t.th,{children:"Stock Status"}),(0,s.jsx)(t.th,{children:"Expected Result"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"2A"}),(0,s.jsx)(t.td,{children:"Only CAPA in stock"}),(0,s.jsx)(t.td,{children:"CAPA auto-selected"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"2B"}),(0,s.jsx)(t.td,{children:"Aftermarket + CAPA in stock"}),(0,s.jsx)(t.td,{children:"No auto-select (user chooses)"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"2C"}),(0,s.jsx)(t.td,{children:"All out of stock"}),(0,s.jsx)(t.td,{children:"No auto-select"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"test-case-3-user-override-protection",children:"Test Case 3: User Override Protection"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Scenario"}),(0,s.jsx)(t.th,{children:"Steps"}),(0,s.jsx)(t.th,{children:"Expected Result"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"3A"}),(0,s.jsx)(t.td,{children:"Auto-select CAPA \u2192 User clicks Aftermarket"}),(0,s.jsx)(t.td,{children:"Stays on Aftermarket"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"3B"}),(0,s.jsx)(t.td,{children:"User selects quality \u2192 Change paint option"}),(0,s.jsx)(t.td,{children:"Quality unchanged"})]})]})]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"performance-metrics",children:"Performance Metrics"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Execution Time:"})," Less than 50ms for auto-select logic"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Memory Impact:"})," ~1KB for function definitions"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Event Listeners:"})," +1 click listener per quality radio (typically 3)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Page Load Delay:"})," 100ms setTimeout for productVariants population"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"browser-compatibility",children:"Browser Compatibility"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Browser"}),(0,s.jsx)(t.th,{children:"Version"}),(0,s.jsx)(t.th,{children:"Status"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Chrome"}),(0,s.jsx)(t.td,{children:"90+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Edge"}),(0,s.jsx)(t.td,{children:"90+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Firefox"}),(0,s.jsx)(t.td,{children:"88+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Safari"}),(0,s.jsx)(t.td,{children:"14+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"iOS Safari"}),(0,s.jsx)(t.td,{children:"14+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Chrome Mobile"}),(0,s.jsx)(t.td,{children:"90+"}),(0,s.jsx)(t.td,{children:"\u2705 Supported"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"ES Features Used:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Arrow functions (ES6)"}),"\n",(0,s.jsx)(t.li,{children:"Template literals (ES6)"}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"querySelector"})," (ES5)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"Array.some()"})," (ES5)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"dispatchEvent()"})," (DOM Level 2)"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(t.h3,{id:"issue-no-auto-selection-occurs",children:"Issue: No Auto-Selection Occurs"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Symptoms:"})," Quality radios remain unselected on page load"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Debug Steps:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Open Console (F12) and look for ",(0,s.jsx)(t.code,{children:"[Auto-Select]"})," logs"]}),"\n",(0,s.jsxs)(t.li,{children:["Check if ",(0,s.jsx)(t.code,{children:"window.productVariants"})," is populated:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"console.log(window.productVariants);\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Verify quality radios exist and aren't disabled:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"document.querySelectorAll('input[name=\"quality_type\"]');\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Check timing - increase delay in ",(0,s.jsx)(t.code,{children:"quality-options-radio-btns.liquid"})," if needed"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Common Causes:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"productVariants"})," not loaded yet (increase 100ms delay)"]}),"\n",(0,s.jsx)(t.li,{children:"Quality radios disabled (check fitment selection required)"}),"\n",(0,s.jsx)(t.li,{children:"All qualities have same stock status (2+ or 0 in stock)"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"issue-wrong-quality-selected",children:"Issue: Wrong Quality Selected"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Symptoms:"})," OEM selected when CAPA product was clicked"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Debug Steps:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Check console for product detection logs"}),"\n",(0,s.jsxs)(t.li,{children:["Look for multiple matches:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"[Auto-Select] \u2713 Match found: capa\n[Auto-Select] \u2713 Match found: oem  // \u2190 Problem!\n"})}),"\n"]}),"\n",(0,s.jsx)(t.li,{children:"Verify product titles have distinct quality keywords"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Solution:"})," Code now uses ",(0,s.jsx)(t.code,{children:"for"})," loop with early break to stop at first match"]}),"\n",(0,s.jsx)(t.h3,{id:"issue-auto-select-overrides-user-choice",children:"Issue: Auto-Select Overrides User Choice"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Symptoms:"})," User selects quality, then it switches automatically"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Debug Steps:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Check ",(0,s.jsx)(t.code,{children:"userSelectedQuality"})," flag:","\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'console.log("User Selected Quality:", userSelectedQuality);\n'})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Look for unexpected calls to ",(0,s.jsx)(t.code,{children:"reevaluateQualityAutoSelection()"})]}),"\n",(0,s.jsx)(t.li,{children:"Check if click listener is properly attached"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Solution:"})," Verify ",(0,s.jsx)(t.code,{children:"initQualityAutoSelection()"})," is called on page load"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,s.jsx)(t.h3,{id:"potential-improvements",children:"Potential Improvements"}),"\n",(0,s.jsx)(t.h4,{id:"1-analytics-integration",children:"1. Analytics Integration"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// Track auto-selection events\ngtag("event", "quality_auto_selected", {\n\tquality: qualityToSelect,\n\tmethod: "url", // or \'inventory\'\n\tproduct_handle: currentProductHandle,\n});\n'})}),"\n",(0,s.jsx)(t.h4,{id:"2-user-preference-persistence",children:"2. User Preference Persistence"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'// Remember last selected quality\nlocalStorage.setItem("preferredQuality", selectedQuality);\n\n// Use on next visit as default (if available)\nconst preferredQuality = localStorage.getItem("preferredQuality");\n'})}),"\n",(0,s.jsx)(t.h4,{id:"3-multi-language-support",children:"3. Multi-Language Support"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'const qualityKeywords = {\n\taftermarket: {\n\t\ten: "aftermarket",\n\t\tes: "postmercado",\n\t},\n\tcapa: {\n\t\ten: "capa",\n\t\tes: "certificado capa",\n\t},\n};\n'})}),"\n",(0,s.jsx)(t.h4,{id:"4-ab-testing-framework",children:"4. A/B Testing Framework"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'if (experiment.variant === "auto-select") {\n\tautoSelectSingleInStockQuality();\n\ttrackExperimentMetric("auto_select_enabled");\n}\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"integration-points",children:"Integration Points"}),"\n",(0,s.jsx)(t.h3,{id:"existing-features-affected",children:"Existing Features Affected"}),"\n",(0,s.jsxs)(t.p,{children:["\u2705 ",(0,s.jsx)(t.strong,{children:"Paint Options Selection"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Auto-selected quality triggers paint variant dropdown population"}),"\n",(0,s.jsx)(t.li,{children:"Price displays update correctly"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["\u2705 ",(0,s.jsx)(t.strong,{children:"VIN Decoder"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"VIN input field visibility depends on quality (OEM requires VIN)"}),"\n",(0,s.jsx)(t.li,{children:"Auto-selection properly shows/hides VIN fields"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["\u2705 ",(0,s.jsx)(t.strong,{children:"Delivery Countdown"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"ETAs calculated for auto-selected quality"}),"\n",(0,s.jsx)(t.li,{children:"Updates correctly when user changes selection"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["\u2705 ",(0,s.jsx)(t.strong,{children:"Add to Cart"})]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Correct product added based on auto-selected quality"}),"\n",(0,s.jsx)(t.li,{children:"Cart reflects proper SKU and pricing"}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"rollback-plan",children:"Rollback Plan"}),"\n",(0,s.jsx)(t.h3,{id:"quick-disable-no-deploy",children:"Quick Disable (No Deploy)"}),"\n",(0,s.jsx)(t.p,{children:"Add to browser console or tag manager:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"window.autoSelectSingleInStockQuality = () => false;\nwindow.initQualityAutoSelection = () => {};\n"})}),"\n",(0,s.jsx)(t.h3,{id:"code-rollback",children:"Code Rollback"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Revert commit:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"git revert <commit-hash>\n"})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Or manually remove:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Lines ~183-340 from ",(0,s.jsx)(t.code,{children:"product-page-component-library.js"})]}),"\n",(0,s.jsxs)(t.li,{children:["Lines ~439-443 from ",(0,s.jsx)(t.code,{children:"quality-options-radio-btns.liquid"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Deploy changes"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"code-review-checklist",children:"Code Review Checklist"}),"\n",(0,s.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Console logs are helpful and prefixed with ",(0,s.jsx)(t.code,{children:"[Auto-Select]"})]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","No infinite loops (early returns in place)"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","User selection flag properly set on click"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","For loop breaks after first match (no overwriting)"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","100ms delay sufficient for productVariants load"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Works with disabled quality radios (graceful skip)"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","No errors when quality UI doesn't exist"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Event bubbling works (change event fires correctly)"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Integration with existing quality handlers intact"]}),"\n",(0,s.jsxs)(t.li,{className:"task-list-item",children:[(0,s.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Browser compatibility verified (IE11 not required)"]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/partify-theme-docs/docs/product-page/vin-decoder",children:"VIN Decoder Input Box"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/partify-theme-docs/docs/product-page/add-to-cart-quality-reenable",children:"Add to Cart Quality Re-enable"})}),"\n",(0,s.jsxs)(t.li,{children:["Product Variants Data Structure: ",(0,s.jsx)(t.code,{children:"snippets/product-page-paint-options.liquid"})]}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"support",children:"Support"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Feature Owner:"})," Senior Shopify Theme Engineer",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"Feature Branch:"})," ",(0,s.jsx)(t.code,{children:"feature/us-auto-select-single-instock-quality"}),(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"Last Updated:"})," January 2, 2026",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"Version:"})," 1.0"]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);