"use strict";(globalThis.webpackChunkpartify_usa=globalThis.webpackChunkpartify_usa||[]).push([[2038],{2919(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"backend/add-endpoints","title":"Adding New Endpoints","description":"Step-by-step process on how to add new endpoints to the Finale Webhook backend","source":"@site/docs/backend/add-endpoints.md","sourceDirName":"backend","slug":"/backend/add-endpoints","permalink":"/partify-theme-docs/docs/backend/add-endpoints","draft":false,"unlisted":false,"editUrl":"https://github.com/partify/partify-theme-docs/tree/main/docs/backend/add-endpoints.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Adding New Endpoints","description":"Step-by-step process on how to add new endpoints to the Finale Webhook backend","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Getting Set Up","permalink":"/partify-theme-docs/docs/backend/setup"},"next":{"title":"Contribution","permalink":"/partify-theme-docs/docs/category/contribution"}}');var i=t(4848),r=t(8453);const o={title:"Adding New Endpoints",description:"Step-by-step process on how to add new endpoints to the Finale Webhook backend",sidebar_position:2},l="Guide: Adding New Webhook Endpoints",d={},a=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\ud83d\udee0\ufe0f Step-by-Step: Adding a New Endpoint",id:"\ufe0f-step-by-step-adding-a-new-endpoint",level:2},{value:"Step 1: Create the Route File",id:"step-1-create-the-route-file",level:3},{value:"Step 2: Register the Route in server.js",id:"step-2-register-the-route-in-serverjs",level:3},{value:"Step 3: Add Tests",id:"step-3-add-tests",level:3},{value:"Step 4: Test Locally",id:"step-4-test-locally",level:3},{value:"Step 5: Commit Your Changes",id:"step-5-commit-your-changes",level:3},{value:"Step 6: Deploy to Production",id:"step-6-deploy-to-production",level:3},{value:"Step 7: Test in Production",id:"step-7-test-in-production",level:3},{value:"\ud83c\udfa8 Common Patterns",id:"-common-patterns",level:2},{value:"Pattern 1: Simple Webhook (No Finale API Calls)",id:"pattern-1-simple-webhook-no-finale-api-calls",level:3},{value:"Pattern 2: Call Finale API",id:"pattern-2-call-finale-api",level:3},{value:"Pattern 3: Multi-Tenant (US and CA)",id:"pattern-3-multi-tenant-us-and-ca",level:3},{value:"Pattern 4: Background Processing",id:"pattern-4-background-processing",level:3},{value:"\ud83d\udce6 Available Utility Functions",id:"-available-utility-functions",level:2},{value:"\ud83d\udd10 Environment Variables",id:"-environment-variables",level:2},{value:"\u2705 Checklist for New Endpoints",id:"-checklist-for-new-endpoints",level:2},{value:"\ud83d\udc1b Debugging Tips",id:"-debugging-tips",level:2},{value:"View logs while developing:",id:"view-logs-while-developing",level:3},{value:"View production logs:",id:"view-production-logs",level:3},{value:"Test with real data:",id:"test-with-real-data",level:3},{value:"\ud83d\udcda Additional Resources",id:"-additional-resources",level:2},{value:"\ud83c\udd98 Common Issues",id:"-common-issues",level:2},{value:"Route not working",id:"route-not-working",level:3},{value:"500 errors",id:"500-errors",level:3},{value:"Changes not deploying",id:"changes-not-deploying",level:3},{value:"Can&#39;t test locally",id:"cant-test-locally",level:3},{value:"\ud83d\udca1 Pro Tips",id:"-pro-tips",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"guide-adding-new-webhook-endpoints",children:"Guide: Adding New Webhook Endpoints"})}),"\n",(0,i.jsx)(n.p,{children:"This guide walks you through creating new webhook endpoints in the Finale Webhooks service."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,i.jsx)(n.p,{children:"The service is organized like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"finale-webhooks/\n\u251c\u2500\u2500 server.js                    # Main app - register routes here\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 routes/                  # Endpoint handlers (one file per endpoint)\n\u2502   \u2502   \u251c\u2500\u2500 damage.js           # Example: damage webhook\n\u2502   \u2502   \u2514\u2500\u2500 inventory.js        # Example: your new endpoint\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u2514\u2500\u2500 finale.js           # Shared Finale API utilities\n\u2514\u2500\u2500 test.http                   # Tests for all endpoints\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Pattern:"})," One route file = One endpoint"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-step-by-step-adding-a-new-endpoint",children:"\ud83d\udee0\ufe0f Step-by-Step: Adding a New Endpoint"}),"\n",(0,i.jsxs)(n.p,{children:["Let's say you want to add an inventory update webhook at ",(0,i.jsx)(n.code,{children:"/webhook/inventory"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-1-create-the-route-file",children:"Step 1: Create the Route File"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create:"})," ",(0,i.jsx)(n.code,{children:"src/routes/inventory.js"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'/**\n * Inventory webhook route handler\n * Description of what this endpoint does\n */\n\nconst express = require("express");\nconst router = express.Router();\nconst { createFinaleConfig, finaleGet, randomId } = require("../utils/finale");\n\n/**\n * POST /webhook/inventory\n * Description of endpoint\n *\n * Body: {\n *   productId: "SKU123",\n *   quantity: 10,\n *   facilityId: "12345"\n * }\n */\nrouter.post("/", async (req, res) => {\n\tconst execId = `INV_EXEC_${new Date().toISOString()}_${randomId()}`;\n\n\ttry {\n\t\t// 1. Validate input\n\t\tconst { productId, quantity, facilityId } = req.body;\n\n\t\tif (!productId) {\n\t\t\treturn res.status(400).json({\n\t\t\t\tok: false,\n\t\t\t\texecId,\n\t\t\t\terror: "productId required",\n\t\t\t});\n\t\t}\n\n\t\tconsole.log(`[${execId}] Processing inventory update for ${productId}`);\n\n\t\t// 2. Your business logic here\n\t\tconst result = await handleInventoryUpdate({\n\t\t\tproductId,\n\t\t\tquantity,\n\t\t\tfacilityId,\n\t\t});\n\n\t\t// 3. Return response\n\t\tres.status(200).json({\n\t\t\tok: true,\n\t\t\texecId,\n\t\t\tresult,\n\t\t});\n\t} catch (err) {\n\t\tconsole.error(`[${execId}] Error:`, err);\n\t\tres.status(500).json({\n\t\t\tok: false,\n\t\t\texecId,\n\t\t\terror: err.message || String(err),\n\t\t});\n\t}\n});\n\n/**\n * Core business logic\n */\nasync function handleInventoryUpdate(params) {\n\tconst { productId, quantity, facilityId } = params;\n\n\t// Get Finale configuration (US or CA based on your needs)\n\tconst cfg = createFinaleConfig("US");\n\n\t// Make API calls, process data, etc.\n\t// Example: fetch product info\n\tconst productUrl = cfg.productUrl(productId);\n\tconst productRes = await finaleGet(cfg, productUrl);\n\n\tif (productRes.code !== 200) {\n\t\tthrow new Error("Product not found");\n\t}\n\n\t// Your logic here...\n\n\treturn {\n\t\tproductId,\n\t\tupdatedQuantity: quantity,\n\t\tstatus: "success",\n\t};\n}\n\nmodule.exports = router;\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-2-register-the-route-in-serverjs",children:"Step 2: Register the Route in server.js"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Edit:"})," ",(0,i.jsx)(n.code,{children:"server.js"})]}),"\n",(0,i.jsx)(n.p,{children:"Add these lines:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// At the top with other requires\nconst inventoryRoute = require("./src/routes/inventory");\n\n// After other app.use() lines\napp.use("/webhook/inventory", inventoryRoute);\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Full example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'require("dotenv").config();\nconst express = require("express");\nconst damageRoute = require("./src/routes/damage");\nconst inventoryRoute = require("./src/routes/inventory"); // \u2190 Add this\n\nconst app = express();\nconst PORT = process.env.PORT || 8080;\n\napp.use(express.json());\n\n// ... logging middleware ...\n\napp.get("/", (req, res) => {\n\tres.json({\n\t\tstatus: "ok",\n\t\tservice: "finale-webhooks",\n\t\ttimestamp: new Date().toISOString(),\n\t\tendpoints: [\n\t\t\t"POST /webhook/damage - Create damaged replacement order",\n\t\t\t"POST /webhook/inventory - Update inventory", // \u2190 Update this list\n\t\t],\n\t});\n});\n\napp.use("/webhook/damage", damageRoute);\napp.use("/webhook/inventory", inventoryRoute); // \u2190 Add this\n\n// ... error handlers ...\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-3-add-tests",children:"Step 3: Add Tests"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Edit:"})," ",(0,i.jsx)(n.code,{children:"test.http"})]}),"\n",(0,i.jsx)(n.p,{children:"Add your test cases:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'### Test Inventory Webhook - Success Case\nPOST http://localhost:8080/webhook/inventory\nContent-Type: application/json\n\n{\n  "productId": "SKU123",\n  "quantity": 10,\n  "facilityId": "12345"\n}\n\n### Test Inventory Webhook - Missing productId (should fail)\nPOST http://localhost:8080/webhook/inventory\nContent-Type: application/json\n\n{\n  "quantity": 10\n}\n\n### Test Inventory Webhook - Production\nPOST https://finale-webhooks-648477666631.us-central1.run.app/webhook/inventory\nContent-Type: application/json\n\n{\n  "productId": "REAL-SKU-HERE",\n  "quantity": 5,\n  "facilityId": "100730"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-4-test-locally",children:"Step 4: Test Locally"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"# Start the server\nnpm start\n"})}),"\n",(0,i.jsx)(n.p,{children:"In VS Code:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.code,{children:"test.http"})]}),"\n",(0,i.jsx)(n.li,{children:'Click "Send Request" above your new test'}),"\n",(0,i.jsx)(n.li,{children:"Check the response"}),"\n",(0,i.jsxs)(n.li,{children:["Check console logs for your ",(0,i.jsx)(n.code,{children:"console.log()"})," messages"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-5-commit-your-changes",children:"Step 5: Commit Your Changes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'git add .\ngit commit -m "Add inventory webhook endpoint"\ngit push\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-6-deploy-to-production",children:"Step 6: Deploy to Production"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"gcloud run deploy finale-webhooks `\n  --source . `\n  --region us-central1 `\n  --allow-unauthenticated `\n  --platform managed\n"})}),"\n",(0,i.jsx)(n.p,{children:"Wait for deployment to complete (2-5 minutes)."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-7-test-in-production",children:"Step 7: Test in Production"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"# Stream logs in one terminal\ngcloud run services logs tail finale-webhooks --region us-central1\n"})}),"\n",(0,i.jsx)(n.p,{children:"In another terminal or using REST Client, send a test request to production."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-common-patterns",children:"\ud83c\udfa8 Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"pattern-1-simple-webhook-no-finale-api-calls",children:"Pattern 1: Simple Webhook (No Finale API Calls)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'router.post("/", async (req, res) => {\n\tconst { data } = req.body;\n\n\t// Do something with data\n\tconsole.log("Received:", data);\n\n\tres.json({ ok: true, message: "Processed" });\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-2-call-finale-api",children:"Pattern 2: Call Finale API"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const { createFinaleConfig, finaleGet } = require("../utils/finale");\n\nasync function doSomething() {\n\tconst cfg = createFinaleConfig("US");\n\tconst url = cfg.orderBaseUrl("U123456");\n\tconst response = await finaleGet(cfg, url);\n\n\tif (response.code === 200) {\n\t\tconst order = response.json;\n\t\t// Do something with order\n\t}\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-3-multi-tenant-us-and-ca",children:"Pattern 3: Multi-Tenant (US and CA)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const { detectTenant, createFinaleConfig } = require(\"../utils/finale\");\n\nasync function handle(orderId) {\n\tconst tenant = detectTenant(orderId); // Returns 'US' or 'CA'\n\n\tif (!tenant) {\n\t\tthrow new Error(\"Unknown tenant\");\n\t}\n\n\tconst cfg = createFinaleConfig(tenant);\n\t// Now use cfg for API calls\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-4-background-processing",children:"Pattern 4: Background Processing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'router.post("/", async (req, res) => {\n\tconst { data } = req.body;\n\n\t// Respond immediately\n\tres.json({ ok: true, message: "Processing in background" });\n\n\t// Process in background (don\'t await)\n\tprocessInBackground(data).catch((err) => {\n\t\tconsole.error("Background error:", err);\n\t});\n});\n\nasync function processInBackground(data) {\n\t// Long-running task here\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-available-utility-functions",children:"\ud83d\udce6 Available Utility Functions"}),"\n",(0,i.jsxs)(n.p,{children:["From ",(0,i.jsx)(n.code,{children:"src/utils/finale.js"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const {\n\tcreateFinaleConfig, // Get API config for tenant\n\tfinaleGet, // GET request to Finale\n\tcreateOrder, // POST order to Finale\n\tgetSupplierIdFromProduct, // GraphQL query for supplier\n\tpickDamagedId, // Find free /D1, /D2, etc.\n\tstripDamagedSuffix, // Remove /D# from orderId\n\tdetectTenant, // US or CA from orderId\n\ttoFinaleTimestamp, // Format date for Finale\n\tcompactObject, // Remove null/empty fields\n\tnumOrUndef, // Safe number conversion\n\trandomId, // Generate random ID\n} = require("../utils/finale");\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-environment-variables",children:"\ud83d\udd10 Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"Access environment variables in your route:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const myConfig = process.env.MY_CONFIG_VALUE;\nconst usStore = process.env.FINALE_US_STORE;\n"})}),"\n",(0,i.jsx)(n.p,{children:"To add new environment variables:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Add to ",(0,i.jsx)(n.code,{children:".env.example"})]})," (template for team)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Add to your ",(0,i.jsx)(n.code,{children:".env"})]})," (your local values)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add to Cloud Run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'gcloud run services update finale-webhooks `\n  --region us-central1 `\n  --set-env-vars "MY_CONFIG_VALUE=my-value"\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-checklist-for-new-endpoints",children:"\u2705 Checklist for New Endpoints"}),"\n",(0,i.jsx)(n.p,{children:"Before submitting a PR:"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Created route file in ",(0,i.jsx)(n.code,{children:"src/routes/"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Registered route in ",(0,i.jsx)(n.code,{children:"server.js"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Added endpoint to health check endpoint list"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Added tests in ",(0,i.jsx)(n.code,{children:"test.http"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tested locally with ",(0,i.jsx)(n.code,{children:"npm start"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Added proper error handling"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Added logging with ",(0,i.jsx)(n.code,{children:"console.log()"})," for debugging"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Validated all required fields"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Documented expected request body format"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Committed and pushed to GitHub"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Deployed to Cloud Run"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tested in production"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Updated documentation if needed"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-debugging-tips",children:"\ud83d\udc1b Debugging Tips"}),"\n",(0,i.jsx)(n.h3,{id:"view-logs-while-developing",children:"View logs while developing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"# Terminal 1: Run server with logs visible\nnpm start\n\n# Terminal 2: Send test requests\n# Use test.http file in VS Code\n"})}),"\n",(0,i.jsx)(n.h3,{id:"view-production-logs",children:"View production logs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'# Stream live\ngcloud run services logs tail finale-webhooks --region us-central1\n\n# View recent\ngcloud run logs read finale-webhooks --region us-central1 --limit 50\n\n# Filter errors only\ngcloud run logs read finale-webhooks --region us-central1 --log-filter="severity>=ERROR"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"test-with-real-data",children:"Test with real data:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use Postman or REST Client"}),"\n",(0,i.jsxs)(n.li,{children:["Save common test cases in ",(0,i.jsx)(n.code,{children:"test.http"})]}),"\n",(0,i.jsx)(n.li,{children:"Use real order IDs from Finale (for testing, not production!)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-additional-resources",children:"\ud83d\udcda Additional Resources"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Express.js Routing:"})," ",(0,i.jsx)(n.a,{href:"https://expressjs.com/en/guide/routing.html",children:"https://expressjs.com/en/guide/routing.html"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cloud Run Docs:"})," ",(0,i.jsx)(n.a,{href:"https://cloud.google.com/run/docs",children:"https://cloud.google.com/run/docs"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Finale API Docs:"})," [Your Finale API documentation link]"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-common-issues",children:"\ud83c\udd98 Common Issues"}),"\n",(0,i.jsx)(n.h3,{id:"route-not-working",children:"Route not working"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Did you register it in ",(0,i.jsx)(n.code,{children:"server.js"}),"?"]}),"\n",(0,i.jsx)(n.li,{children:"Did you restart the server after changes?"}),"\n",(0,i.jsx)(n.li,{children:"Check for typos in the path"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"500-errors",children:"500 errors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check logs: ",(0,i.jsx)(n.code,{children:"gcloud run logs read finale-webhooks --region us-central1 --limit 10"})]}),"\n",(0,i.jsx)(n.li,{children:"Look for stack traces"}),"\n",(0,i.jsx)(n.li,{children:"Verify environment variables are set in Cloud Run"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"changes-not-deploying",children:"Changes not deploying"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Make sure you committed and pushed to GitHub"}),"\n",(0,i.jsxs)(n.li,{children:["Verify the deployment completed: ",(0,i.jsx)(n.code,{children:"gcloud run services describe finale-webhooks --region us-central1"})]}),"\n",(0,i.jsx)(n.li,{children:"Check build logs if it failed"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cant-test-locally",children:"Can't test locally"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure ",(0,i.jsx)(n.code,{children:".env"})," file exists with valid credentials"]}),"\n",(0,i.jsxs)(n.li,{children:["Run ",(0,i.jsx)(n.code,{children:"npm install"})," if you just pulled changes"]}),"\n",(0,i.jsx)(n.li,{children:"Check port 8080 isn't already in use"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-pro-tips",children:"\ud83d\udca1 Pro Tips"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use execId for tracking"})," - Every request gets a unique ID for log correlation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always validate input"})," - Return 400 errors for bad requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Log important steps"})," - Makes debugging production issues easier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test error cases"})," - Not just happy path"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Keep routes small"})," - Move complex logic to separate functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use utility functions"})," - Don't duplicate code from other routes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document as you go"})," - Future you will thank you!"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Happy coding! \ud83d\ude80"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var s=t(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);